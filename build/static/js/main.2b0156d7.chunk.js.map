{"version":3,"sources":["history.js","context/AuthContext.js","context/PlayerContext.js","actions/AuthActions.js","actions/PlayerActions.js","pages/LoginPage.js","pages/RegisterPage.js","actions/ChatActions.js","components/chat/Chat.js","components/bars/TopBar.js","components/bars/MenuBar.js","components/character/Character.js","components/map/Map.js","actions/LocationActions.js","actions/FightAction.js","components/fights/Fights.js","components/fights/Pvp.js","components/shop/Shop.js","actions/ShopActions.js","components/character/Inventory.js","components/bank/Bank.js","pages/GamePage.js","App.js","serviceWorker.js","index.js"],"names":["createBrowserHistory","AuthContext","createContext","PlayerContext","setToken","token","localStorage","setItem","checkAuth","getToken","getItem","getPlayerInfo","config","headers","Authorization","Accept","axios","get","concat","process","then","res","data","catch","err","removeItem","LoginPage","_useContext","useContext","setAuth","isAuth","auth","setPlayer","_useState","useState","username","password","_useState2","Object","slicedToArray","form","setValues","updateField","e","objectSpread","defineProperty","target","name","value","react_default","a","createElement","Redirect","to","className","onChange","type","onClick","grant_type","client_id","client_secret","post","access_token","login","history","push","Link","RegisterPage","email","console","log","register","User","props","user","level","emotes","src","Message","message","textAndEmoties","text","split","map","word","index","emojiObject","emoji","Fragment","key","alt","moment","date","format","is_system","sender","Chat","isLoading","settings","setSetting","_useState3","_useState4","users","setUser","_useState5","_useState6","messages","setMessage","_useState7","_useState8","setValue","intervalRef","useRef","useEffect","id","setInterval","getMessages","getUsers","current","clearInterval","lib_default","Chat_Message","length","Chat_User","onSubmit","preventDefault","sendMessage","autoComplete","TopBar","lineHpColor","_useContext2","player","lineCurrentHp","hp_current","hp_max","in_battle","data-progress","style","width","backgroundColor","count_wins","count_loses","href","MenuBar","Slot","slot","item","icon","image","Character","pathItems","slots","items","equipItems","filter","forEach","avatar","Character_Slot","Room","room","left","x","top","y","model","changeLocation","bind","Map","background","height","location","setLocation","location_id","locationId","getLocations","exitButton","rooms","handleClick","playerId","put","mapHide","backgroundImage","Map_Room","getFights","currentFight","Fights","fights","setFight","handleTakeFight","fightId","takeFight","fight","user1","addFight","Pvp","isWhite","battle","setBattle","components_character_Character","user2","attack","pathSkills","Item","targetItem","selectItem","Shop","shop","setShop","showItemInfo","getShopInfo","num","shopList","i","Math","ceil","Shop_Item","p_atk","price","itemId","userId","item_id","buyItem","onDoubleClick","equipItem","Inventory","itemsList","notEquipItems","itemable_type","inventory_size","goldCount","goldItem","handleEquipItem","Inventory_Item","Bank","count","getGold","GamePage","locationType","components_bars_TopBar","components_fights_Pvp","components_map_Map","components_fights_Fights","components_bank_Bank","components_shop_Shop","components_character_Inventory","components_bars_MenuBar","components_chat_Chat","PrivateRoute","_ref","Component","component","rest","objectWithoutProperties","Route","assign","render","pathname","state","from","App","Router","Provider","exact","path","App_PrivateRoute","Boolean","window","hostname","match","ReactDOM","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2b0156d7.chunk.js","sourcesContent":["import { createBrowserHistory } from 'history';\r\nexport default createBrowserHistory();\r\n","import { createContext } from 'react';\r\n\r\nexport const AuthContext = createContext({});\r\n","import { createContext } from 'react';\r\n\r\nexport const PlayerContext = createContext({});\r\n","import axios from 'axios';\r\n\r\nexport const register = (email, username, password) => {\r\n\tconst data = {\r\n\t\temail: email,\r\n\t\tusername: username,\r\n\t\tpassword: password,\r\n\t};\r\n\r\n\treturn axios\r\n\t\t.post(`${process.env.REACT_APP_API_URL}/api/users`, data)\r\n\t\t.then(res => {\r\n\t\t\treturn res;\r\n\t\t});\r\n};\r\n\r\nexport const login = (username, password) => {\r\n\tconst data = {\r\n\t\tgrant_type: process.env.REACT_APP_API_GRANT_TYPE,\r\n\t\tclient_id: process.env.REACT_APP_API_CLIENT_ID,\r\n\t\tclient_secret: process.env.REACT_APP_API_CLIENT_SECRET,\r\n\t\tusername: username,\r\n\t\tpassword: password,\r\n\t};\r\n\r\n\treturn axios\r\n\t\t.post(`${process.env.REACT_APP_API_URL}/oauth/token`, data)\r\n\t\t.then(res => {\r\n\t\t\tsetToken(res.data.access_token);\r\n\t\t\treturn res;\r\n\t\t});\r\n};\r\nconst setToken = token => {\r\n\treturn localStorage.setItem('token', token);\r\n};\r\n\r\nexport const checkAuth = () => {\r\n\tif (getToken()) {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n};\r\nexport const getToken = () => {\r\n\treturn localStorage.getItem('token');\r\n};\r\n\r\nexport const logout = () => {\r\n\treturn localStorage.removeItem('token');\r\n};\r\n","import axios from 'axios';\r\n\r\nexport const getPlayerInfo = () => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\r\n\treturn axios\r\n\t\t.get(`${process.env.REACT_APP_API_URL}/api/users/self`, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t})\r\n\t\t.catch(err => {\r\n\t\t\treturn removeItem();\r\n\t\t});\r\n};\r\n\r\nexport const equipItem = itemId => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.get(\r\n\t\t\t`${process.env.REACT_APP_API_URL}/api/users/equip_item/${itemId}`,\r\n\t\t\tconfig\r\n\t\t)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const getGold = () => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.get(`${process.env.REACT_APP_API_URL}/api/users/get_gold`, config)\r\n\t\t.then(res => {\r\n\t\t\tconsole.log(res);\r\n\r\n\t\t\treturn res;\r\n\t\t});\r\n};\r\n\r\nconst getToken = () => {\r\n\treturn localStorage.getItem('token');\r\n};\r\nconst removeItem = () => {\r\n\treturn localStorage.removeItem('token');\r\n};\r\n","import React, { useState, useContext } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport history from '../history';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { PlayerContext } from '../context/PlayerContext';\r\nimport { login } from '../actions/AuthActions';\r\nimport { getPlayerInfo } from '../actions/PlayerActions';\r\nimport './LoginPage.css';\r\n\r\nconst LoginPage = () => {\r\n\tconst { setAuth, auth } = useContext(AuthContext);\r\n\tconst isAuth = auth.isAuth;\r\n\tconst { setPlayer } = useContext(PlayerContext);\r\n\r\n\tconst [form, setValues] = useState({\r\n\t\tusername: '',\r\n\t\tpassword: '',\r\n\t});\r\n\r\n\tconst updateField = e => {\r\n\t\tsetValues({\r\n\t\t\t...form,\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleSubmit = () => {\r\n\t\tlogin(form.username, form.password).then(res => {\r\n\t\t\tgetPlayerInfo().then(res => {\r\n\t\t\t\tsetAuth({ isAuth: true });\r\n\t\t\t\tsetPlayer(res);\r\n\t\t\t\thistory.push('/game');\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\tif (isAuth) {\r\n\t\treturn <Redirect to=\"/game\" />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"loginBackground\">\r\n\t\t\t<div className=\"loginForm\">\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\tvalue={form.username}\r\n\t\t\t\t\tonChange={updateField}\r\n\t\t\t\t/>\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\tvalue={form.password}\r\n\t\t\t\t\tonChange={updateField}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"button\" onClick={handleSubmit}>\r\n\t\t\t\t\tLogin\r\n\t\t\t\t</div>\r\n\t\t\t\t<Link to=\"/register\">Register</Link>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default LoginPage;\r\n","import React, { useState, useContext } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport history from '../history';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { register } from '../actions/AuthActions';\r\nimport './RegisterPage.css';\r\n\r\nconst RegisterPage = () => {\r\n\tconst { setAuth, auth } = useContext(AuthContext);\r\n\tconst isAuth = auth.isAuth;\r\n\r\n\tconst [form, setValues] = useState({\r\n\t\tusername: '',\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t});\r\n\r\n\tconst updateField = e => {\r\n\t\tsetValues({\r\n\t\t\t...form,\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleSubmit = () => {\r\n\t\tconsole.log(form);\r\n\t\tregister(form.email, form.username, form.password).then(res => {\r\n\t\t\thistory.push('/');\r\n\t\t});\r\n\t};\r\n\r\n\tif (isAuth) {\r\n\t\treturn <Redirect to=\"/game\" />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"registerBackground\">\r\n\t\t\t<div className=\"registerForm\">\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\tvalue={form.email}\r\n\t\t\t\t\tonChange={updateField}\r\n\t\t\t\t/>\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\tvalue={form.username}\r\n\t\t\t\t\tonChange={updateField}\r\n\t\t\t\t/>\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\tvalue={form.password}\r\n\t\t\t\t\tonChange={updateField}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"button\" onClick={handleSubmit}>\r\n\t\t\t\t\tRegister\r\n\t\t\t\t</div>\r\n\t\t\t\t<Link to=\"/\">Login</Link>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default RegisterPage;\r\n","import axios from 'axios';\r\n\r\nexport const getUsers = () => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.get(`${process.env.REACT_APP_API_URL}/api/chat/users_online`, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const getMessages = () => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.get(`${process.env.REACT_APP_API_URL}/api/chat`, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const sendMessage = message => {\r\n\tconst data = {\r\n\t\tmessage: message,\r\n\t};\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.post(`${process.env.REACT_APP_API_URL}/api/chat`, data, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\nconst getToken = () => {\r\n\treturn localStorage.getItem('token');\r\n};\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport moment from 'moment';\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\nimport { sendMessage, getMessages, getUsers } from '../../actions/ChatActions';\r\nimport './Chat.css';\r\n\r\nconst User = props => {\r\n\tconst { user } = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"user\">\r\n\t\t\t<span className=\"circle\" />\r\n\t\t\t<span className=\"username\">{user.name}</span>\r\n\t\t\t<span className=\"level\">[{user.level}]</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst emotes = [\r\n\t{ name: '4Head', src: 'assets/emotes/twitch/4head.0' },\r\n\t{ name: 'Kappa', src: 'assets/emotes/twitch/Kappa.0' },\r\n\t{ name: 'OMEGALUL', src: 'assets/emotes/twitch/OMEGALUL.0' },\r\n\t{ name: 'chompy', src: 'assets/emotes/twitch/chompy.gif' },\r\n\t{ name: 'DatSheffy', src: 'assets/emotes/twitch/DatSheffy.0' },\r\n\t{ name: 'KappaClaus', src: 'assets/emotes/twitch/KappaClaus.0' },\r\n\t{ name: 'KappaPride', src: 'assets/emotes/twitch/KappaPride.0' },\r\n\t{ name: 'KKomrade', src: 'assets/emotes/twitch/KKomrade.png' },\r\n\t{ name: 'KKona', src: 'assets/emotes/twitch/KKona.0' },\r\n\t{ name: 'LUL', src: 'assets/emotes/twitch/LUL.0' },\r\n\t{ name: 'MingLee', src: 'assets/emotes/twitch/MingLee.0' },\r\n\t{ name: 'PogChamp', src: 'assets/emotes/twitch/PogChamp.0' },\r\n\t{ name: 'WutFace', src: 'assets/emotes/twitch/WutFace.0' },\r\n];\r\n\r\nconst Message = props => {\r\n\tconst { message } = props;\r\n\tconst wordArray = message.text.split(' ');\r\n\r\n\tconst textAndEmoties = wordArray.map((word, index) => {\r\n\t\tlet emojiObject = [];\r\n\t\temotes.map(emoji => {\r\n\t\t\tif (emoji.name === word) {\r\n\t\t\t\treturn (emojiObject = emoji);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\t\tif (emojiObject.name === word) {\r\n\t\t\treturn (\r\n\t\t\t\t<React.Fragment key={index}>\r\n\t\t\t\t\t<img alt={word} src={emojiObject.src} />{' '}\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn <React.Fragment key={index}>{word} </React.Fragment>;\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div className=\"message\">\r\n\t\t\t<span className=\"date\">{moment(message.date).format('HH:mm')}</span>\r\n\t\t\t<span className=\"username\">\r\n\t\t\t\t{message.is_system ? 'Системное сообщение' : message.sender.name}:\r\n\t\t\t</span>\r\n\t\t\t<span className=\"text\">{textAndEmoties}</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst Chat = () => {\r\n\tconst [settings, setSetting] = useState({ isLoading: true });\r\n\tconst [users, setUser] = useState([]);\r\n\tconst [messages, setMessage] = useState([]);\r\n\tconst [form, setValue] = useState({ text: '' });\r\n\tconst intervalRef = useRef();\r\n\r\n\tconst updateForm = e => {\r\n\t\tsetValue({ text: e.target.value });\r\n\t};\r\n\tconst handleSubmit = e => {\r\n\t\te.preventDefault();\r\n\t\tsendMessage(form.text);\r\n\t\tsetValue({ text: '' });\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst id = setInterval(() => {\r\n\t\t\tgetMessages().then(res => {\r\n\t\t\t\tsetMessage(res);\r\n\t\t\t\tsetSetting({ isLoading: false });\r\n\t\t\t});\r\n\t\t\tgetUsers().then(res => {\r\n\t\t\t\tsetUser(res);\r\n\t\t\t});\r\n\t\t}, 1000);\r\n\t\tintervalRef.current = id;\r\n\t\treturn () => {\r\n\t\t\tclearInterval(intervalRef.current);\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className=\"chat\">\r\n\t\t\t{!settings.isLoading ? (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<ScrollToBottom className=\"messages\">\r\n\t\t\t\t\t\t{messages\r\n\t\t\t\t\t\t\t? messages.map((message, index) => (\r\n\t\t\t\t\t\t\t\t\t<Message key={index} message={message} />\r\n\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t: null}\r\n\t\t\t\t\t</ScrollToBottom>\r\n\t\t\t\t\t<div className=\"users\">\r\n\t\t\t\t\t\t<div className=\"online\">Онлайн: {users.length}</div>\r\n\t\t\t\t\t\t{users\r\n\t\t\t\t\t\t\t? users.map((user, index) => <User key={index} user={user} />)\r\n\t\t\t\t\t\t\t: null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"inputBox\">\r\n\t\t\t\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tname=\"text\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tvalue={form.text}\r\n\t\t\t\t\t\t\t\t\tonChange={updateForm}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"buttonBox\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"loading\">Loading...</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Chat;\r\n","import React, { useContext, useEffect, useRef } from 'react';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { logout } from '../../actions/AuthActions';\r\nimport { PlayerContext } from '../../context/PlayerContext';\r\nimport { getPlayerInfo } from '../../actions/PlayerActions';\r\nimport './TopBar.css';\r\n\r\nconst TopBar = () => {\r\n\tconst { setAuth } = useContext(AuthContext);\r\n\tconst { player, setPlayer } = useContext(PlayerContext);\r\n\tconst intervalRef = useRef();\r\n\tconst lineCurrentHp = (player.hp_current / player.hp_max) * 100;\r\n\tlet lineHpColor;\r\n\tif (lineCurrentHp <= 19) {\r\n\t\tlineHpColor = 'red';\r\n\t} else if (lineCurrentHp <= 45) {\r\n\t\tlineHpColor = 'yellow';\r\n\t} else lineHpColor = 'green';\r\n\r\n\tuseEffect(() => {\r\n\t\tconst id = setInterval(() => {\r\n\t\t\tgetPlayerInfo().then(res => {\r\n\t\t\t\tsetPlayer({\r\n\t\t\t\t\t...player,\r\n\t\t\t\t\thp_current: res.hp_current,\r\n\t\t\t\t\tin_battle: res.in_battle,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}, 3000);\r\n\t\tintervalRef.current = id;\r\n\t\treturn () => {\r\n\t\t\tclearInterval(intervalRef.current);\r\n\t\t};\r\n\t});\r\n\r\n\tconst handleLogout = () => {\r\n\t\tlogout();\r\n\t\tsetAuth({ auth: false });\r\n\t};\r\n\treturn (\r\n\t\t<div className=\"topBar\">\r\n\t\t\t<div className=\"player\">\r\n\t\t\t\t{player.name} [{player.level}]\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"hp\"\r\n\t\t\t\t\tdata-progress={player.hp_current + '/' + player.hp_max}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName=\"current\"\r\n\t\t\t\t\t\tstyle={{ width: lineCurrentHp + '%', backgroundColor: lineHpColor }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>Wins: {player.count_wins}</div>\r\n\t\t\t<div>Loses: {player.count_loses}</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"/\" onClick={handleLogout}>\r\n\t\t\t\t\tLogout\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TopBar;\r\n","import React from 'react';\r\n\r\nimport './MenuBar.css';\r\n\r\nconst MenuBar = () => {\r\n\treturn <div className=\"gameMenu\">map</div>;\r\n};\r\n\r\nexport default MenuBar;\r\n","import React from 'react';\r\nimport './Character.css';\r\n\r\nconst Character = props => {\r\n\tconst { player, target } = props;\r\n\r\n\tconst lineCurrentHp = (player.hp_current / player.hp_max) * 100;\r\n\tlet lineHpColor;\r\n\tif (lineCurrentHp <= 19) {\r\n\t\tlineHpColor = 'red';\r\n\t} else if (lineCurrentHp <= 45) {\r\n\t\tlineHpColor = 'yellow';\r\n\t} else lineHpColor = 'green';\r\n\r\n\tconst pathAvatars = '/assets/avatars/';\r\n\tconst pathItems = '/assets/items/';\r\n\tconst slots = [\r\n\t\t{\r\n\t\t\tname: 'head',\r\n\t\t\tclassName: 'item itemHelmet',\r\n\t\t\timage: pathItems + '/inventory/helmet.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'chest',\r\n\t\t\tclassName: 'item itemArmor',\r\n\t\t\timage: pathItems + '/inventory/armor.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'belt',\r\n\t\t\tclassName: 'item itemBelt',\r\n\t\t\timage: pathItems + '/inventory/belt.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'legs',\r\n\t\t\tclassName: 'item itemPants',\r\n\t\t\timage: pathItems + '/inventory/pants.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'main_hand',\r\n\t\t\tclassName: 'item itemWeapon',\r\n\t\t\timage: pathItems + '/inventory/main_hand.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'off_hand',\r\n\t\t\tclassName: 'item itemSubWeapon',\r\n\t\t\timage: pathItems + '/inventory/off_hand.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'gloves',\r\n\t\t\tclassName: 'item itemGloves',\r\n\t\t\timage: pathItems + '/inventory/gloves.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'feet',\r\n\t\t\tclassName: 'item itemShoes',\r\n\t\t\timage: pathItems + '/inventory/shoes.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'earringOne',\r\n\t\t\tclassName: 'item itemEarringOne',\r\n\t\t\timage: pathItems + '/inventory/earring.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'earringTwo',\r\n\t\t\tclassName: 'item itemEarringTwo',\r\n\t\t\timage: pathItems + '/inventory/earring.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'ringOne',\r\n\t\t\tclassName: 'item itemRingOne',\r\n\t\t\timage: pathItems + '/inventory/ring.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'ringTwo',\r\n\t\t\tclassName: 'item itemRingTwo',\r\n\t\t\timage: pathItems + '/inventory/ring.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'necklace',\r\n\t\t\tclassName: 'item itemNecklace',\r\n\t\t\timage: pathItems + '/inventory/necklace.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'bag',\r\n\t\t\tclassName: 'item itemBag',\r\n\t\t\timage: pathItems + '/inventory/bag.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t];\r\n\r\n\t//Определяем одеты вещи\r\n\tif (player.items) {\r\n\t\tconst equipItems = player.items.filter(item => item.slot != null);\r\n\t\t//Заносим вещи в слоты\r\n\t\tslots.forEach((slot, index) => {\r\n\t\t\tequipItems.forEach(item => {\r\n\t\t\t\tif (slot.name === item.slot) slot.item = item;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={target ? 'character target' : 'character user'}>\r\n\t\t\t<div>\r\n\t\t\t\t{player.name} [{player.level}]\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"hp\"\r\n\t\t\t\tdata-progress={player.hp_current + '/' + player.hp_max}\r\n\t\t\t>\r\n\t\t\t\t<span\r\n\t\t\t\t\tclassName=\"current\"\r\n\t\t\t\t\tstyle={{ width: lineCurrentHp + '%', backgroundColor: lineHpColor }}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"avatar\">\r\n\t\t\t\t<img src={pathAvatars + player.avatar} alt={player.name} />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"slots\">\r\n\t\t\t\t{slots.map((slot, index) => {\r\n\t\t\t\t\treturn <Slot key={index} slot={slot} />;\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst Slot = props => {\r\n\tconst { slot } = props;\r\n\tconst pathItems = '/assets/items/';\r\n\r\n\treturn (\r\n\t\t<div className={slot.className}>\r\n\t\t\t{slot.item.icon ? (\r\n\t\t\t\t<img src={pathItems + slot.item.icon} alt={slot.item.name} />\r\n\t\t\t) : (\r\n\t\t\t\t<img src={slot.image} alt={slot.name} />\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Character;\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport { getLocations, changeLocation } from '../../actions/LocationActions';\r\nimport { PlayerContext } from '../../context/PlayerContext';\r\nimport './Map.css';\r\n\r\nconst Map = () => {\r\n\tconst { player, setPlayer } = useContext(PlayerContext);\r\n\tconst [settings, setSetting] = useState({\r\n\t\tbackground: null,\r\n\t\twidth: 500,\r\n\t\theight: 268,\r\n\t\tisLoading: true,\r\n\t});\r\n\tconst [location, setLocation] = useState({});\r\n\tconst pathCities = '/assets/cities';\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (player.location_id) {\r\n\t\t\t\tgetLocations(player.location_id).then(res => {\r\n\t\t\t\t\tsetLocation(res);\r\n\t\t\t\t\tsetSetting({ ...settings, isLoading: false, exitButton: {} });\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t[player.location_id]\r\n\t);\r\n\r\n\tconst rooms = location.rooms;\r\n\r\n\tconst handleClick = locationId => {\r\n\t\tchangeLocation(player.id, locationId).then(res => {\r\n\t\t\tsetPlayer({\r\n\t\t\t\t...player,\r\n\t\t\t\tlocation_id: res.location_id,\r\n\t\t\t\tlocation: res.location,\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\t//скрываем карту если находимся в здании\r\n\tlet mapHide = false;\r\n\tswitch (location.type) {\r\n\t\tcase 'arena':\r\n\t\t\tmapHide = true;\r\n\t\t\tbreak;\r\n\t\tcase 'shop':\r\n\t\t\tmapHide = true;\r\n\t\t\tbreak;\r\n\t\tcase 'bank':\r\n\t\t\tmapHide = true;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tmapHide = false;\r\n\t}\r\n\r\n\treturn !mapHide ? (\r\n\t\t<div\r\n\t\t\tclassName=\"map\"\r\n\t\t\tstyle={{\r\n\t\t\t\twidth: settings.width,\r\n\t\t\t\theight: settings.height,\r\n\t\t\t\tbackgroundImage: 'url(' + pathCities + location.background + ')',\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{location.location_id ? (\r\n\t\t\t\t<div onClick={handleClick.bind(null, 1)}>Back</div>\r\n\t\t\t) : null}\r\n\t\t\t{settings.isLoading ? (\r\n\t\t\t\t<div>Loading...</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"location\">\r\n\t\t\t\t\t{location.name}\r\n\t\t\t\t\t{rooms\r\n\t\t\t\t\t\t? rooms.map((room, index) => (\r\n\t\t\t\t\t\t\t\t<Room key={index} room={room} changeLocation={handleClick} />\r\n\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t: null}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t) : (\r\n\t\t<div className=\"map\">\r\n\t\t\t<button onClick={handleClick.bind(null, 1)}>Выход</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst Room = props => {\r\n\tconst { room } = props;\r\n\tconst pathCities = '/assets/cities';\r\n\r\n\treturn (\r\n\t\t<div className=\"room\" style={{ left: room.x, top: room.y }}>\r\n\t\t\t<img\r\n\t\t\t\tsrc={pathCities + room.model}\r\n\t\t\t\talt={room.name}\r\n\t\t\t\tonClick={props.changeLocation.bind(null, room.id)}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Map;\r\n","import axios from 'axios';\r\nimport { getToken } from './AuthActions';\r\n\r\nexport const getLocations = locationId => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.get(`${process.env.REACT_APP_API_URL}/api/locations/${locationId}`, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const changeLocation = (playerId, locationId) => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.put(\r\n\t\t\t`${process.env.REACT_APP_API_URL}/api/users/${playerId}?update=location`,\r\n\t\t\t{\r\n\t\t\t\tlocation_id: locationId,\r\n\t\t\t},\r\n\t\t\tconfig\r\n\t\t)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n","import axios from 'axios';\r\nimport { getToken } from './AuthActions';\r\n\r\nexport const getFights = () => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.get(`${process.env.REACT_APP_API_URL}/api/battles`, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const addFight = () => {\r\n\tconst data = {};\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.post(`${process.env.REACT_APP_API_URL}/api/battles`, data, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const takeFight = fightId => {\r\n\tconst data = {};\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.put(\r\n\t\t\t`${process.env.REACT_APP_API_URL}/api/battles/${fightId}`,\r\n\t\t\tdata,\r\n\t\t\tconfig\r\n\t\t)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const currentFight = () => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.get(`${process.env.REACT_APP_API_URL}/api/battles/current`, config)\r\n\t\t.then(res => {\r\n\t\t\tconsole.log(res);\r\n\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const attack = () => {\r\n\tconst data = {};\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.post(`${process.env.REACT_APP_API_URL}/api/battles/attack`, data, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n","import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport { PlayerContext } from '../../context/PlayerContext';\r\nimport { getFights, addFight, takeFight } from '../../actions/FightAction';\r\nimport './Fights.css';\r\n\r\nconst Fights = () => {\r\n\tconst { player, setPlayer } = useContext(PlayerContext);\r\n\tconst [fights, setFight] = useState([]);\r\n\tconst intervalRef = useRef();\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tgetFights().then(res => {\r\n\t\t\t\tsetFight(res);\r\n\t\t\t});\r\n\t\t\tconst id = setInterval(() => {\r\n\t\t\t\tgetFights().then(res => {\r\n\t\t\t\t\tsetFight(res);\r\n\t\t\t\t});\r\n\t\t\t}, 5000);\r\n\t\t\tintervalRef.current = id;\r\n\t\t\treturn () => {\r\n\t\t\t\tclearInterval(intervalRef.current);\r\n\t\t\t};\r\n\t\t},\r\n\t\t[fights]\r\n\t);\r\n\tconst handleClick = () => {\r\n\t\taddFight().then(res => console.log(res));\r\n\t};\r\n\tconst handleTakeFight = fightId => {\r\n\t\ttakeFight(fightId).then(res => {\r\n\t\t\tsetPlayer({ ...player, in_battle: true });\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"fights\">\r\n\t\t\t{fights\r\n\t\t\t\t? fights.map((fight, index) => (\r\n\t\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t\t{fight.id} - {fight.user1.name} [{fight.user1.level}]{' '}\r\n\t\t\t\t\t\t\t{fight.user1.id === player.id ? null : (\r\n\t\t\t\t\t\t\t\t<button onClick={handleTakeFight.bind(null, fight.id)}>\r\n\t\t\t\t\t\t\t\t\tFight\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t  ))\r\n\t\t\t\t: null}\r\n\t\t\t<button onClick={handleClick}>Fight</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Fights;\r\n","import React, { useEffect, useRef, useState, useContext } from 'react';\r\nimport { PlayerContext } from '../../context/PlayerContext';\r\nimport { currentFight, attack } from '../../actions/FightAction';\r\nimport Character from '../character/Character';\r\n\r\nimport './Pvp.css';\r\n\r\nconst Pvp = () => {\r\n\tconst { player } = useContext(PlayerContext);\r\n\tconst [settings, setSetting] = useState({ isWhite: false });\r\n\tconst [battle, setBattle] = useState({});\r\n\tconst intervalRef = useRef();\r\n\tconst pathSkills = '/assets/skills/';\r\n\r\n\tuseEffect(() => {\r\n\t\tcurrentFight().then(res => {\r\n\t\t\tsetBattle(res);\r\n\t\t});\r\n\t\tconst id = setInterval(() => {\r\n\t\t\tcurrentFight().then(res => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tsetBattle(res);\r\n\t\t\t\t\tsetSetting({ isWhite: false });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetSetting({ isWhite: true });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 5000);\r\n\t\tintervalRef.current = id;\r\n\t\treturn () => {\r\n\t\t\tconsole.log(123);\r\n\r\n\t\t\tclearInterval(intervalRef.current);\r\n\t\t};\r\n\t}, []);\r\n\tconst handleClickAttack = () => {\r\n\t\tattack().then(res => {\r\n\t\t\tsetSetting({ isWhite: true });\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{settings.isWhite ? (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Character player={player} />\r\n\t\t\t\t\t<div className=\"doll\">Ждем ход противника</div>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t) : (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t{battle.user1 ? (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{battle.user1.id === player.id ? (\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Character player={battle.user1} />\r\n\t\t\t\t\t\t\t\t\t<Character player={battle.user2} target={true} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Character player={battle.user2} />\r\n\t\t\t\t\t\t\t\t\t<Character player={battle.user1} target={true} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<div className=\"hotKeyPanel\">\r\n\t\t\t\t\t\t\t\t<span className=\"key\" onClick={handleClickAttack}>\r\n\t\t\t\t\t\t\t\t\t<img src={pathSkills + 'might.png'} alt=\"Attack\" />\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span className=\"key\" />\r\n\t\t\t\t\t\t\t\t<span className=\"key\" />\r\n\t\t\t\t\t\t\t\t<span className=\"key\" />\r\n\t\t\t\t\t\t\t\t<span className=\"key\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Pvp;\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport { PlayerContext } from '../../context/PlayerContext';\r\nimport { getShopInfo, buyItem } from '../../actions/ShopActions';\r\nimport { getPlayerInfo } from '../../actions/PlayerActions';\r\n\r\nimport './Shop.css';\r\n\r\nconst Shop = () => {\r\n\tconst { player, setPlayer } = useContext(PlayerContext);\r\n\tconst [shop, setShop] = useState();\r\n\tconst [settings, setSetting] = useState({\r\n\t\tisLoading: true,\r\n\t\tshowItemInfo: false,\r\n\t\tselectItem: {},\r\n\t});\r\n\tconst pathItems = '/assets/items';\r\n\r\n\tuseEffect(() => {\r\n\t\tgetShopInfo(player.location_id).then(res => {\r\n\t\t\tconsole.log(res);\r\n\r\n\t\t\tsetShop(res);\r\n\t\t\tsetSetting({ ...settings, isLoading: false });\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst selectItem = item => {\r\n\t\tsetSetting({ showItemInfo: true, selectItem: item });\r\n\t};\r\n\r\n\tconst getItem = (itemId, userId) => {\r\n\t\tbuyItem(itemId).then(res => {\r\n\t\t\tgetPlayerInfo().then(res => {\r\n\t\t\t\tsetPlayer({ ...player, items: res.items });\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\tconst leftTo6 = num => {\r\n\t\treturn Math.ceil(num / 6) * 6 - num;\r\n\t};\r\n\r\n\t//Генерируем список магазина\r\n\tconst shopList = [];\r\n\tif (!settings.isLoading) {\r\n\t\t//Добавляем вещи в список\r\n\t\tshop.items.map((item, index) => {\r\n\t\t\treturn (shopList[index] = item);\r\n\t\t});\r\n\r\n\t\t//Дополняем список пустыми ячейками\r\n\t\tfor (let i = 0; i < leftTo6(shop.items.length); i++) {\r\n\t\t\tshopList.push(0);\r\n\t\t}\r\n\t}\r\n\r\n\treturn !settings.isLoading ? (\r\n\t\t<div className=\"shop\">\r\n\t\t\t<div className=\"shopName\">{shop.name}</div>\r\n\t\t\t<div className=\"shopList\">\r\n\t\t\t\t{shopList.map((item, index) => (\r\n\t\t\t\t\t<Item\r\n\t\t\t\t\t\tselectItem={selectItem.bind(this)}\r\n\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\ttargetItem={settings.selectItem.id}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t{settings.showItemInfo ? (\r\n\t\t\t\t<div className=\"shopItemInfo\">\r\n\t\t\t\t\t<div className=\"shopItemIcon\">\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc={pathItems + settings.selectItem.icon}\r\n\t\t\t\t\t\t\talt={settings.selectItem.name}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"shopItemDesc\">\r\n\t\t\t\t\t\t<div className=\"name\">{settings.selectItem.name}</div>\r\n\t\t\t\t\t\t<div className=\"stat\">\r\n\t\t\t\t\t\t\tphysical attack:{' '}\r\n\t\t\t\t\t\t\t<span className=\"value\">{settings.selectItem.p_atk}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"price\">\r\n\t\t\t\t\t\t\tprice: <span className=\"value\">{settings.selectItem.price}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"shopItemBuy\"\r\n\t\t\t\t\t\tonClick={getItem.bind(null, settings.selectItem.id, player.id)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tBuy\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t) : null}\r\n\t\t</div>\r\n\t) : (\r\n\t\t<div>2</div>\r\n\t);\r\n};\r\n\r\nconst Item = props => {\r\n\tconst { item, targetItem } = props;\r\n\tconst pathItems = '/assets/items';\r\n\r\n\tconst selectItem = item => {\r\n\t\tconsole.log(item);\r\n\r\n\t\tprops.selectItem(item);\r\n\t};\r\n\r\n\treturn item.id ? (\r\n\t\t<div className=\"shopSlot\" onClick={selectItem.bind(null, item)}>\r\n\t\t\t<div\r\n\t\t\t\tclassName={targetItem === item.id ? 'itemFrame selected' : 'itemFrame'}\r\n\t\t\t/>\r\n\t\t\t<img src={pathItems + item.icon} alt={item.name} />\r\n\t\t</div>\r\n\t) : (\r\n\t\t<div className=\"shopSlot\">\r\n\t\t\t<img src={pathItems + '/inventory/free_slot.png'} alt=\"free slot\" />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Shop;\r\n","import axios from 'axios';\r\nimport { getToken } from './AuthActions';\r\n\r\nexport const getShopInfo = locationId => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.get(\r\n\t\t\t`${process.env.REACT_APP_API_URL}/api/shops/location/${locationId}`,\r\n\t\t\tconfig\r\n\t\t)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const buyItem = itemId => {\r\n\tconst data = { item_id: itemId };\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.post(`${process.env.REACT_APP_API_URL}/api/items`, data, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n","import React, { useContext } from 'react';\r\nimport { PlayerContext } from '../../context/PlayerContext';\r\nimport { equipItem, getPlayerInfo } from '../../actions/PlayerActions';\r\n\r\nimport './Inventory.css';\r\n\r\nconst Inventory = () => {\r\n\tconst { player, setPlayer } = useContext(PlayerContext);\r\n\r\n\tlet itemsList = [];\r\n\t//Отсеиваем надетые вещи\r\n\tconst notEquipItems = player.items.filter(\r\n\t\titem => item.slot === null || item.itemable_type === 'etc'\r\n\t);\r\n\r\n\t//генерируем инвентарь\r\n\tfor (let i = 0; i < player.inventory_size; i++) {\r\n\t\titemsList.push(0);\r\n\t}\r\n\r\n\t//Добавляем вещи в инвентарь\r\n\tnotEquipItems.map((item, index) => {\r\n\t\treturn (itemsList[index] = item);\r\n\t});\r\n\r\n\t//Отображаем количество золота\r\n\tconst goldItem = itemsList.filter(item => item.itemable_type === 'etc')[0];\r\n\tlet goldCount;\r\n\tif (goldItem) {\r\n\t\tgoldCount = goldItem['count'];\r\n\t} else goldCount = 0;\r\n\r\n\tconst handleEquipItem = item => {\r\n\t\tequipItem(item.id).then(res => {\r\n\t\t\tgetPlayerInfo().then(res => {\r\n\t\t\t\tsetPlayer({ ...player, items: res.items });\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\tconsole.log(player);\r\n\r\n\treturn (\r\n\t\t<div className=\"inventory\">\r\n\t\t\t<div className=\"inventoryTitle\">Inventory</div>\r\n\t\t\t<div className=\"inventoryList\">\r\n\t\t\t\t{itemsList.map((item, index) => (\r\n\t\t\t\t\t<Item\r\n\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\tequipItem={() => handleEquipItem(item)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"inventoryGold\">\r\n\t\t\t\t<div className=\"count\">\r\n\t\t\t\t\t<span className=\"coin\" />\r\n\t\t\t\t\t{goldCount}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst Item = props => {\r\n\tconst { item } = props;\r\n\tconst pathItems = '/assets/items/';\r\n\r\n\tconst equipItem = item => {\r\n\t\tprops.equipItem(item);\r\n\t};\r\n\r\n\treturn item.id ? (\r\n\t\t<div className=\"inventorySlot\" onDoubleClick={() => equipItem(item)}>\r\n\t\t\t<div className=\"itemFrame\" />\r\n\t\t\t<img src={pathItems + item.icon} alt={item.name} />\r\n\t\t</div>\r\n\t) : (\r\n\t\t<div className=\"inventorySlot\">\r\n\t\t\t<img src={pathItems + 'inventory/free_slot.png'} alt=\"free slot\" />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Inventory;\r\n","import React, { useContext } from 'react';\r\nimport { PlayerContext } from '../../context/PlayerContext';\r\nimport { getPlayerInfo, getGold } from '../../actions/PlayerActions';\r\n\r\nimport './Bank.css';\r\n\r\nconst Bank = () => {\r\n\tconst { player, setPlayer } = useContext(PlayerContext);\r\n\tconst goldItem = player.items.filter(item => item.itemable_type === 'etc')[0];\r\n\r\n\tconst giveMeMany = () => {\r\n\t\tgetGold().then(res => {\r\n\t\t\tgetPlayerInfo().then(res => {\r\n\t\t\t\tsetPlayer({ ...player, items: res.items });\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"bank\">\r\n\t\t\t<div>Bank</div>\r\n\t\t\t<div>\r\n\t\t\t\tУ Вас <b>{goldItem ? goldItem.count : 0}</b> Gold\r\n\t\t\t</div>\r\n\t\t\t<button onClick={giveMeMany}>Взять соточку</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Bank;\r\n","import React, { useContext } from 'react';\r\n\r\nimport { PlayerContext } from '../context/PlayerContext';\r\n\r\nimport Chat from '../components/chat/Chat';\r\nimport TopBar from '../components/bars/TopBar';\r\nimport MenuBar from '../components/bars/MenuBar';\r\nimport Character from '../components/character/Character';\r\nimport Map from '../components/map/Map';\r\nimport Fights from '../components/fights/Fights';\r\nimport Pvp from '../components/fights/Pvp';\r\nimport Shop from '../components/shop/Shop';\r\nimport Inventory from '../components/character/Inventory';\r\nimport Bank from '../components/bank/Bank';\r\n\r\nimport './GamePage.css';\r\n\r\nconst GamePage = () => {\r\n\tconst { player } = useContext(PlayerContext);\r\n\tlet locationType;\r\n\tif (player.location) {\r\n\t\tlocationType = player.location.type;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<TopBar />\r\n\t\t\t{player.in_battle ? (\r\n\t\t\t\t<div className=\"battleground\">\r\n\t\t\t\t\t<Pvp />\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"playground\">\r\n\t\t\t\t\t<Character player={player} />\r\n\t\t\t\t\t<Map />\r\n\t\t\t\t\t{locationType === 'arena' ? <Fights /> : null}\r\n\t\t\t\t\t{locationType === 'bank' ? <Bank /> : null}\r\n\t\t\t\t\t{locationType === 'shop' ? (\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<Shop />\r\n\t\t\t\t\t\t\t<Inventory />\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t<MenuBar />\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t<Chat />\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default GamePage;\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport { Router, Route, Redirect } from 'react-router-dom';\r\n\r\nimport history from './history';\r\nimport { AuthContext } from './context/AuthContext';\r\nimport { PlayerContext } from './context/PlayerContext';\r\nimport { checkAuth } from './actions/AuthActions';\r\nimport { getPlayerInfo } from './actions/PlayerActions';\r\n//import NavBar from './components/layouts/NavBar';\r\nimport './App.css';\r\n\r\nimport LoginPage from './pages/LoginPage';\r\nimport RegisterPage from './pages/RegisterPage';\r\nimport GamePage from './pages/GamePage';\r\n\r\nconst App = () => {\r\n\tconst [auth, setAuth] = useState({ isAuth: false });\r\n\tconst [player, setPlayer] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAuth({ isAuth: checkAuth() });\r\n\t\tif (checkAuth()) {\r\n\t\t\tgetPlayerInfo()\r\n\t\t\t\t.then(res => setPlayer(res))\r\n\t\t\t\t.catch(err => console.log(err));\r\n\t\t}\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<Router history={history}>\r\n\t\t\t<AuthContext.Provider value={{ auth, setAuth }}>\r\n\t\t\t\t<PlayerContext.Provider value={{ player, setPlayer }}>\r\n\t\t\t\t\t{/* <NavBar /> */}\r\n\t\t\t\t\t<Route exact path=\"/\" component={LoginPage} />\r\n\t\t\t\t\t<Route path=\"/register\" component={RegisterPage} />\r\n\t\t\t\t\t<PrivateRoute path=\"/game\" component={GamePage} />\r\n\t\t\t\t</PlayerContext.Provider>\r\n\t\t\t</AuthContext.Provider>\r\n\t\t</Router>\r\n\t);\r\n};\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n\tconst { auth } = useContext(AuthContext);\r\n\tconst isAuth = auth.isAuth;\r\n\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\trender={props =>\r\n\t\t\t\tisAuth ? (\r\n\t\t\t\t\t<Component {...props} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Redirect to={{ pathname: '/', state: { from: props.location } }} />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === 'localhost' ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === '[::1]' ||\r\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(\r\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n\t\t)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\r\n\t\t\t\t\t\t\t'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then(registration => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === 'installed') {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\r\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tconsole.error('Error during service worker registration:', error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl)\r\n\t\t.then(response => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\tif (\r\n\t\t\t\tresponse.status === 404 ||\r\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\r\n\t\t\t) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\r\n\t\t\t\t'No internet connection found. App is running in offline mode.'\r\n\t\t\t);\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\tregistration.unregister();\r\n\t\t});\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}