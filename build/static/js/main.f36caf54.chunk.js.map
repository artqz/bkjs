{"version":3,"sources":["history.js","context/AuthContext.js","context/PlayerContext.js","actions/AuthActions.js","actions/PlayerActions.js","pages/LoginPage.js","pages/RegisterPage.js","actions/ChatActions.js","components/chat/Chat.js","components/bars/TopBar.js","components/character/Character.js","components/map/Map.js","actions/LocationActions.js","actions/FightAction.js","components/fights/Fights.js","components/fights/Pvp.js","pages/GamePage.js","App.js","serviceWorker.js","index.js"],"names":["createBrowserHistory","AuthContext","createContext","PlayerContext","setToken","token","localStorage","setItem","checkAuth","getToken","getItem","getPlayerInfo","config","headers","Authorization","Accept","axios","get","concat","process","then","res","data","catch","err","removeItem","LoginPage","_useContext","useContext","setAuth","isAuth","auth","setPlayer","_useState","useState","username","password","_useState2","Object","slicedToArray","form","setValues","updateField","e","objectSpread","defineProperty","target","name","value","react_default","a","createElement","Redirect","to","className","onChange","type","onClick","grant_type","client_id","client_secret","post","access_token","login","history","push","Link","RegisterPage","email","console","log","register","sendMessage","message","User","props","user","level","emotes","src","Message","textAndEmoties","text","split","map","word","index","emojiObject","emoji","Fragment","key","alt","moment","date","format","Chat","isLoading","settings","setSetting","_useState3","_useState4","users","setUser","_useState5","_useState6","messages","setMessage","_useState7","_useState8","setValue","intervalRef","useRef","useEffect","id","setInterval","getMessages","getUsers","current","clearInterval","lib_default","Chat_Message","length","Chat_User","onSubmit","preventDefault","autoComplete","TopBar","lineHpColor","_useContext2","player","lineCurrentHp","hp_current","hp_max","in_battle","data-progress","style","width","backgroundColor","href","Slot","slot","image","Character","pathItems","slots","item","avatar","Character_Slot","Room","room","left","x","top","y","model","changeLocation","bind","Map","background","height","location","setLocation","location_id","locationId","getLocations","exitButton","rooms","handleClick","playerId","put","backgroundImage","Map_Room","currentFight","Fights","fights","setFight","getFights","handleTakeFight","fightId","takeFight","fight","user1","addFight","Pvp","isWhite","battle","setBattle","attack","components_character_Character","user2","GamePage","components_bars_TopBar","fights_Pvp","components_map_Map","components_fights_Fights","components_chat_Chat","PrivateRoute","_ref","Component","component","rest","objectWithoutProperties","Route","assign","render","pathname","state","from","App","Router","Provider","exact","path","App_PrivateRoute","Boolean","window","hostname","match","ReactDOM","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f36caf54.chunk.js","sourcesContent":["import { createBrowserHistory } from 'history';\r\nexport default createBrowserHistory();\r\n","import { createContext } from 'react';\r\n\r\nexport const AuthContext = createContext({});\r\n","import { createContext } from 'react';\r\n\r\nexport const PlayerContext = createContext({});\r\n","import axios from 'axios';\r\n\r\nexport const register = (email, username, password) => {\r\n\tconst data = {\r\n\t\temail: email,\r\n\t\tusername: username,\r\n\t\tpassword: password,\r\n\t};\r\n\r\n\treturn axios\r\n\t\t.post(`${process.env.REACT_APP_API_URL}/api/users`, data)\r\n\t\t.then(res => {\r\n\t\t\treturn res;\r\n\t\t});\r\n};\r\n\r\nexport const login = (username, password) => {\r\n\tconst data = {\r\n\t\tgrant_type: process.env.REACT_APP_API_GRANT_TYPE,\r\n\t\tclient_id: process.env.REACT_APP_API_CLIENT_ID,\r\n\t\tclient_secret: process.env.REACT_APP_API_CLIENT_SECRET,\r\n\t\tusername: username,\r\n\t\tpassword: password,\r\n\t};\r\n\r\n\treturn axios\r\n\t\t.post(`${process.env.REACT_APP_API_URL}/oauth/token`, data)\r\n\t\t.then(res => {\r\n\t\t\tsetToken(res.data.access_token);\r\n\t\t\treturn res;\r\n\t\t});\r\n};\r\nconst setToken = token => {\r\n\treturn localStorage.setItem('token', token);\r\n};\r\n\r\nexport const checkAuth = () => {\r\n\tif (getToken()) {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n};\r\nexport const getToken = () => {\r\n\treturn localStorage.getItem('token');\r\n};\r\n\r\nexport const logout = () => {\r\n\treturn localStorage.removeItem('token');\r\n};\r\n","import axios from 'axios';\r\n\r\nexport const getPlayerInfo = () => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\r\n\treturn axios\r\n\t\t.get(`${process.env.REACT_APP_API_URL}/api/user`, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t})\r\n\t\t.catch(err => {\r\n\t\t\treturn removeItem();\r\n\t\t});\r\n};\r\nconst getToken = () => {\r\n\treturn localStorage.getItem('token');\r\n};\r\nconst removeItem = () => {\r\n\treturn localStorage.removeItem('token');\r\n};\r\n","import React, { useState, useContext } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport history from '../history';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { PlayerContext } from '../context/PlayerContext';\r\nimport { login } from '../actions/AuthActions';\r\nimport { getPlayerInfo } from '../actions/PlayerActions';\r\nimport './LoginPage.css';\r\n\r\nconst LoginPage = () => {\r\n\tconst { setAuth, auth } = useContext(AuthContext);\r\n\tconst isAuth = auth.isAuth;\r\n\tconst { setPlayer } = useContext(PlayerContext);\r\n\r\n\tconst [form, setValues] = useState({\r\n\t\tusername: '',\r\n\t\tpassword: '',\r\n\t});\r\n\r\n\tconst updateField = e => {\r\n\t\tsetValues({\r\n\t\t\t...form,\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleSubmit = () => {\r\n\t\tlogin(form.username, form.password).then(res => {\r\n\t\t\tgetPlayerInfo().then(res => {\r\n\t\t\t\tsetAuth({ isAuth: true });\r\n\t\t\t\tsetPlayer(res);\r\n\t\t\t\thistory.push('/game');\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\tif (isAuth) {\r\n\t\treturn <Redirect to=\"/game\" />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"loginBackground\">\r\n\t\t\t<div className=\"loginForm\">\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\tvalue={form.username}\r\n\t\t\t\t\tonChange={updateField}\r\n\t\t\t\t/>\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\tvalue={form.password}\r\n\t\t\t\t\tonChange={updateField}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"button\" onClick={handleSubmit}>\r\n\t\t\t\t\tLogin\r\n\t\t\t\t</div>\r\n\t\t\t\t<Link to=\"/register\">Register</Link>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default LoginPage;\r\n","import React, { useState, useContext } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport history from '../history';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { register } from '../actions/AuthActions';\r\nimport './RegisterPage.css';\r\n\r\nconst RegisterPage = () => {\r\n\tconst { setAuth, auth } = useContext(AuthContext);\r\n\tconst isAuth = auth.isAuth;\r\n\r\n\tconst [form, setValues] = useState({\r\n\t\tusername: '',\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t});\r\n\r\n\tconst updateField = e => {\r\n\t\tsetValues({\r\n\t\t\t...form,\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleSubmit = () => {\r\n\t\tconsole.log(form);\r\n\t\tregister(form.email, form.username, form.password).then(res => {\r\n\t\t\thistory.push('/');\r\n\t\t});\r\n\t};\r\n\r\n\tif (isAuth) {\r\n\t\treturn <Redirect to=\"/game\" />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"registerBackground\">\r\n\t\t\t<div className=\"registerForm\">\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\tvalue={form.email}\r\n\t\t\t\t\tonChange={updateField}\r\n\t\t\t\t/>\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\tvalue={form.username}\r\n\t\t\t\t\tonChange={updateField}\r\n\t\t\t\t/>\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\tvalue={form.password}\r\n\t\t\t\t\tonChange={updateField}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"button\" onClick={handleSubmit}>\r\n\t\t\t\t\tRegister\r\n\t\t\t\t</div>\r\n\t\t\t\t<Link to=\"/\">Login</Link>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default RegisterPage;\r\n","import axios from 'axios';\r\n\r\nexport const getUsers = () => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.get(`${process.env.REACT_APP_API_URL}/api/chat/users_online`, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const getMessages = () => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.get(`${process.env.REACT_APP_API_URL}/api/chat`, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const sendMessage = message => {\r\n\tconst data = {\r\n\t\tmessage: message,\r\n\t};\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.post(`${process.env.REACT_APP_API_URL}/api/chat`, data, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\nconst getToken = () => {\r\n\treturn localStorage.getItem('token');\r\n};\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport moment from 'moment';\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\nimport { sendMessage, getMessages, getUsers } from '../../actions/ChatActions';\r\nimport './Chat.css';\r\n\r\nconst User = props => {\r\n\tconst { user } = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"user\">\r\n\t\t\t<span className=\"circle\" />\r\n\t\t\t<span className=\"username\">{user.name}</span>\r\n\t\t\t<span className=\"level\">[{user.level}]</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst emotes = [\r\n\t{ name: '4Head', src: 'assets/emotes/twitch/4head.0' },\r\n\t{ name: 'Kappa', src: 'assets/emotes/twitch/Kappa.0' },\r\n\t{ name: 'OMEGALUL', src: 'assets/emotes/twitch/OMEGALUL.0' },\r\n\t{ name: 'chompy', src: 'assets/emotes/twitch/chompy.gif' },\r\n\t{ name: 'DatSheffy', src: 'assets/emotes/twitch/DatSheffy.0' },\r\n\t{ name: 'KappaClaus', src: 'assets/emotes/twitch/KappaClaus.0' },\r\n\t{ name: 'KappaPride', src: 'assets/emotes/twitch/KappaPride.0' },\r\n\t{ name: 'KKomrade', src: 'assets/emotes/twitch/KKomrade.png' },\r\n\t{ name: 'KKona', src: 'assets/emotes/twitch/KKona.0' },\r\n\t{ name: 'LUL', src: 'assets/emotes/twitch/LUL.0' },\r\n\t{ name: 'MingLee', src: 'assets/emotes/twitch/MingLee.0' },\r\n\t{ name: 'PogChamp', src: 'assets/emotes/twitch/PogChamp.0' },\r\n\t{ name: 'WutFace', src: 'assets/emotes/twitch/WutFace.0' },\r\n];\r\n\r\nconst Message = props => {\r\n\tconst { message } = props;\r\n\tconst wordArray = message.text.split(' ');\r\n\r\n\tconst textAndEmoties = wordArray.map((word, index) => {\r\n\t\tlet emojiObject = [];\r\n\t\temotes.map(emoji => {\r\n\t\t\tif (emoji.name === word) {\r\n\t\t\t\treturn (emojiObject = emoji);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\t\tif (emojiObject.name === word) {\r\n\t\t\treturn (\r\n\t\t\t\t<React.Fragment key={index}>\r\n\t\t\t\t\t<img alt={word} src={emojiObject.src} />{' '}\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn <React.Fragment key={index}>{word} </React.Fragment>;\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div className=\"message\">\r\n\t\t\t<span className=\"date\">{moment(message.date).format('HH:mm')}</span>\r\n\t\t\t<span className=\"username\">{message.user.name}:</span>\r\n\t\t\t<span className=\"text\">{textAndEmoties}</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst Chat = () => {\r\n\tconst [settings, setSetting] = useState({ isLoading: true });\r\n\tconst [users, setUser] = useState([]);\r\n\tconst [messages, setMessage] = useState([]);\r\n\tconst [form, setValue] = useState({ text: '' });\r\n\tconst intervalRef = useRef();\r\n\r\n\tconst updateForm = e => {\r\n\t\tsetValue({ text: e.target.value });\r\n\t};\r\n\tconst handleSubmit = e => {\r\n\t\te.preventDefault();\r\n\t\tsendMessage(form.text);\r\n\t\tsetValue({ text: '' });\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst id = setInterval(() => {\r\n\t\t\tgetMessages().then(res => {\r\n\t\t\t\tsetMessage(res);\r\n\t\t\t\tsetSetting({ isLoading: false });\r\n\t\t\t});\r\n\t\t\tgetUsers().then(res => {\r\n\t\t\t\tsetUser(res);\r\n\t\t\t});\r\n\t\t}, 1000);\r\n\t\tintervalRef.current = id;\r\n\t\treturn () => {\r\n\t\t\tclearInterval(intervalRef.current);\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className=\"chat\">\r\n\t\t\t{!settings.isLoading ? (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<ScrollToBottom className=\"messages\">\r\n\t\t\t\t\t\t{messages\r\n\t\t\t\t\t\t\t? messages.map((message, index) => (\r\n\t\t\t\t\t\t\t\t\t<Message key={index} message={message} />\r\n\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t: null}\r\n\t\t\t\t\t</ScrollToBottom>\r\n\t\t\t\t\t<div className=\"users\">\r\n\t\t\t\t\t\t<div className=\"online\">Онлайн: {users.length}</div>\r\n\t\t\t\t\t\t{users\r\n\t\t\t\t\t\t\t? users.map((user, index) => <User key={index} user={user} />)\r\n\t\t\t\t\t\t\t: null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"inputBox\">\r\n\t\t\t\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tname=\"text\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"input\"\r\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\tvalue={form.text}\r\n\t\t\t\t\t\t\t\t\tonChange={updateForm}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"buttonBox\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"loading\">Loading...</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Chat;\r\n","import React, { useContext, useEffect, useRef } from 'react';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { logout } from '../../actions/AuthActions';\r\nimport { PlayerContext } from '../../context/PlayerContext';\r\nimport { getPlayerInfo } from '../../actions/PlayerActions';\r\nimport './TopBar.css';\r\n\r\nconst TopBar = () => {\r\n\tconst { setAuth } = useContext(AuthContext);\r\n\tconst { player, setPlayer } = useContext(PlayerContext);\r\n\tconst intervalRef = useRef();\r\n\tconst lineCurrentHp = (player.hp_current / player.hp_max) * 100;\r\n\tlet lineHpColor;\r\n\tif (lineCurrentHp <= 19) {\r\n\t\tlineHpColor = 'red';\r\n\t} else if (lineCurrentHp <= 45) {\r\n\t\tlineHpColor = 'yellow';\r\n\t} else lineHpColor = 'green';\r\n\r\n\tuseEffect(() => {\r\n\t\tconst id = setInterval(() => {\r\n\t\t\tgetPlayerInfo().then(res => {\r\n\t\t\t\tsetPlayer({\r\n\t\t\t\t\t...player,\r\n\t\t\t\t\thp_current: res.hp_current,\r\n\t\t\t\t\tin_battle: res.in_battle,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}, 3000);\r\n\t\tintervalRef.current = id;\r\n\t\treturn () => {\r\n\t\t\tclearInterval(intervalRef.current);\r\n\t\t};\r\n\t});\r\n\r\n\tconst handleLogout = () => {\r\n\t\tlogout();\r\n\t\tsetAuth({ auth: false });\r\n\t};\r\n\treturn (\r\n\t\t<div className=\"topBar\">\r\n\t\t\t<div className=\"player\">\r\n\t\t\t\t{player.name} [{player.level}]\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"hp\"\r\n\t\t\t\t\tdata-progress={player.hp_current + '/' + player.hp_max}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName=\"current\"\r\n\t\t\t\t\t\tstyle={{ width: lineCurrentHp + '%', backgroundColor: lineHpColor }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"/\" onClick={handleLogout}>\r\n\t\t\t\t\tLogout\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TopBar;\r\n","import React from 'react';\r\nimport './Character.css';\r\n\r\nconst Character = props => {\r\n\tconst { player } = props;\r\n\r\n\tconst pathAvatars = '/assets/avatars/';\r\n\tconst pathItems = '/assets/items/';\r\n\tconst slots = [\r\n\t\t{\r\n\t\t\tname: 'helmet',\r\n\t\t\tclassName: 'item itemHelmet',\r\n\t\t\timage: pathItems + '/inventory/helmet.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'armor',\r\n\t\t\tclassName: 'item itemArmor',\r\n\t\t\timage: pathItems + '/inventory/armor.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'belt',\r\n\t\t\tclassName: 'item itemBelt',\r\n\t\t\timage: pathItems + '/inventory/belt.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'pants',\r\n\t\t\tclassName: 'item itemPants',\r\n\t\t\timage: pathItems + '/inventory/pants.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'main_hand',\r\n\t\t\tclassName: 'item itemWeapon',\r\n\t\t\timage: pathItems + '/inventory/main_hand.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'off_hand',\r\n\t\t\tclassName: 'item itemSubWeapon',\r\n\t\t\timage: pathItems + '/inventory/off_hand.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'gloves',\r\n\t\t\tclassName: 'item itemGloves',\r\n\t\t\timage: pathItems + '/inventory/gloves.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'shoes',\r\n\t\t\tclassName: 'item itemShoes',\r\n\t\t\timage: pathItems + '/inventory/shoes.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'earringOne',\r\n\t\t\tclassName: 'item itemEarringOne',\r\n\t\t\timage: pathItems + '/inventory/earring.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'earringTwo',\r\n\t\t\tclassName: 'item itemEarringTwo',\r\n\t\t\timage: pathItems + '/inventory/earring.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'ringOne',\r\n\t\t\tclassName: 'item itemRingOne',\r\n\t\t\timage: pathItems + '/inventory/ring.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'ringTwo',\r\n\t\t\tclassName: 'item itemRingTwo',\r\n\t\t\timage: pathItems + '/inventory/ring.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'necklace',\r\n\t\t\tclassName: 'item itemNecklace',\r\n\t\t\timage: pathItems + '/inventory/necklace.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'bag',\r\n\t\t\tclassName: 'item itemBag',\r\n\t\t\timage: pathItems + '/inventory/bag.png',\r\n\t\t\titem: [],\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<div className=\"character\">\r\n            <div>{player.name} - {player.hp_current}</div>\r\n\t\t\t<div className=\"avatar\">\r\n\t\t\t\t<img src={pathAvatars + player.avatar} alt={player.name} />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"slots\">\r\n\t\t\t\t{slots.map((slot, index) => {\r\n\t\t\t\t\treturn <Slot key={index} slot={slot} />;\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst Slot = props => {\r\n\tconst { slot } = props;\r\n\r\n\treturn (\r\n\t\t<div className={slot.className}>\r\n\t\t\t<img src={slot.image} alt={slot.name} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Character;\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport { getLocations, changeLocation } from '../../actions/LocationActions';\r\nimport { PlayerContext } from '../../context/PlayerContext';\r\nimport './Map.css';\r\n\r\nconst Map = () => {\r\n\tconst { player, setPlayer } = useContext(PlayerContext);\r\n\tconst [settings, setSetting] = useState({\r\n\t\tbackground: null,\r\n\t\twidth: 500,\r\n\t\theight: 268,\r\n\t\tisLoading: true,\r\n\t});\r\n\tconst [location, setLocation] = useState({});\r\n\tconst pathCities = '/assets/cities';\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (player.location_id) {\r\n\t\t\t\tgetLocations(player.location_id).then(res => {\r\n\t\t\t\t\tsetLocation(res);\r\n\t\t\t\t\tsetSetting({ ...settings, isLoading: false, exitButton: {} });\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t[player.location_id]\r\n\t);\r\n\r\n\tconst rooms = location.rooms;\r\n\r\n\tconst handleClick = locationId => {\r\n\t\tchangeLocation(player.id, locationId).then(res => {\r\n\t\t\tsetPlayer({ ...player, location_id: res.location_id });\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"map\"\r\n\t\t\tstyle={{\r\n\t\t\t\twidth: settings.width,\r\n\t\t\t\theight: settings.height,\r\n\t\t\t\tbackgroundImage: 'url(' + pathCities + location.background + ')',\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{location.location_id ? (\r\n\t\t\t\t<div onClick={handleClick.bind(null, 1)}>Back</div>\r\n\t\t\t) : null}\r\n\t\t\t{settings.isLoading ? (\r\n\t\t\t\t<div>Loading...</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"location\">\r\n\t\t\t\t\t{location.name}\r\n\t\t\t\t\t{rooms\r\n\t\t\t\t\t\t? rooms.map((room, index) => (\r\n\t\t\t\t\t\t\t\t<Room key={index} room={room} changeLocation={handleClick} />\r\n\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t: null}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst Room = props => {\r\n\tconst { room } = props;\r\n\tconst pathCities = '/assets/cities';\r\n\r\n\treturn (\r\n\t\t<div className=\"room\" style={{ left: room.x, top: room.y }}>\r\n\t\t\t<img\r\n\t\t\t\tsrc={pathCities + room.model}\r\n\t\t\t\talt={room.name}\r\n\t\t\t\tonClick={props.changeLocation.bind(null, room.id)}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Map;\r\n","import axios from 'axios';\r\nimport { getToken } from './AuthActions';\r\n\r\nexport const getLocations = locationId => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.get(`${process.env.REACT_APP_API_URL}/api/locations/${locationId}`, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const changeLocation = (playerId, locationId) => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.put(\r\n\t\t\t`http://127.0.0.1:8000/api/users/${playerId}?update=location`,\r\n\t\t\t{\r\n\t\t\t\tlocation_id: locationId,\r\n\t\t\t},\r\n\t\t\tconfig\r\n\t\t)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n","import axios from 'axios';\r\nimport { getToken } from './AuthActions';\r\n\r\nexport const getFights = () => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.get(`${process.env.REACT_APP_API_URL}/api/battles`, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const addFight = () => {\r\n\tconst data = {};\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.post(`${process.env.REACT_APP_API_URL}/api/battles`, data, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const takeFight = fightId => {\r\n\tconst data = {};\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.put(`${process.env.REACT_APP_API_URL}/api/battles/${fightId}`, data, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const currentFight = () => {\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.get(`${process.env.REACT_APP_API_URL}/api/battles/current`, config)\r\n\t\t.then(res => {\r\n            console.log(res);\r\n            \r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n\r\nexport const attack = () => {\r\n\tconst data = {};\r\n\tconst token = getToken();\r\n\tconst config = {\r\n\t\theaders: {\r\n\t\t\tAuthorization: 'Bearer ' + token,\r\n\t\t\tAccept: 'application/json',\r\n\t\t},\r\n\t};\r\n\treturn axios\r\n\t\t.post(`${process.env.REACT_APP_API_URL}/api/battles/attack`, data, config)\r\n\t\t.then(res => {\r\n\t\t\treturn res.data;\r\n\t\t});\r\n};\r\n","import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport { PlayerContext } from '../../context/PlayerContext';\r\nimport { sendMessage } from '../../actions/ChatActions';\r\nimport { getFights, addFight, takeFight } from '../../actions/FightAction';\r\nimport './Fights.css';\r\n\r\nconst Fights = () => {\r\n\tconst { player, setPlayer } = useContext(PlayerContext);\r\n\tconst [fights, setFight] = useState([]);\r\n\tconst intervalRef = useRef();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst id = setInterval(() => {\r\n\t\t\tgetFights().then(res => {\r\n\t\t\t\tsetFight(res);\r\n\t\t\t});\r\n\t\t}, 5000);\r\n\t\tintervalRef.current = id;\r\n\t\treturn () => {\r\n\t\t\tclearInterval(intervalRef.current);\r\n\t\t};\r\n\t}, [fights]);\r\n\tconst handleClick = () => {\r\n\t\taddFight().then(res => console.log(res));\r\n\t\tsendMessage('<--- Этот уебок подал заявку на бой!');\r\n\t};\r\n\tconst handleTakeFight = fightId => {\r\n\t\ttakeFight(fightId).then(res => {\r\n\t\t\tsetPlayer({ ...player, in_battle: true });\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"fights\">\r\n\t\t\t{fights\r\n\t\t\t\t? fights.map((fight, index) => (\r\n\t\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t\t{fight.id} - {fight.user1.name} [{fight.user1.level}]{' '}\r\n\t\t\t\t\t\t\t<button onClick={handleTakeFight.bind(null, fight.id)}>\r\n\t\t\t\t\t\t\t\tFight\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t  ))\r\n\t\t\t\t: null}\r\n\t\t\t<button onClick={handleClick}>Fight</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Fights;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { currentFight, attack } from '../../actions/FightAction';\r\nimport Character from '../character/Character';\r\nconst Pvp = () => {\r\n    const [settings, setSetting] = useState({isWhite: false});\r\n    const [battle, setBattle] = useState({});\r\n    const intervalRef = useRef();\r\n\tuseEffect(() => {\r\n        currentFight().then(res => {\r\n            setBattle(res);       \r\n        });\r\n\t\tconst id = setInterval(() => {\r\n\t\t\tcurrentFight().then(res => {                \r\n                if(res) {          \r\n                    setBattle(res); \r\n                    setSetting({isWhite: false});\r\n                }\r\n                else {\r\n                    setSetting({isWhite: true});\r\n                    \r\n                }         \r\n\t\t\t});\r\n\t\t}, 5000);\r\n\t\tintervalRef.current = id;\r\n\t\treturn () => {\r\n            console.log(123);\r\n            \r\n\t\t\tclearInterval(intervalRef.current);\r\n\t\t};\r\n    }, []);\r\n    const handleClickAttack = () => {\r\n        attack().then(res => {\r\n            setSetting({isWhite: true});\r\n            console.log(res);            \r\n        })\r\n    }    \r\n\treturn (\r\n\t\t<div>\r\n            {settings.isWhite ? <span>Ожидаеем ход противника</span> : (\r\n                <React.Fragment>\r\n                    <button onClick={handleClickAttack}>Uebat!</button>\r\n                    {battle.user1 ? <Character player={battle.user1} /> : null }\r\n                    {battle.user2 ? <Character player={battle.user2} /> : null }\r\n                </React.Fragment>\r\n            )}\r\n\t\t\t\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Pvp;\r\n","import React, { useContext } from 'react';\r\n\r\nimport { PlayerContext } from '../context/PlayerContext';\r\n\r\nimport Chat from '../components/chat/Chat';\r\nimport TopBar from '../components/bars/TopBar';\r\nimport Character from '../components/character/Character';\r\nimport Map from '../components/map/Map';\r\nimport Fights from '../components/fights/Fights';\r\nimport Pvp from '../components/fights/Pvp';\r\n\r\nconst GamePage = () => {\r\n\tconst { player } = useContext(PlayerContext);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<TopBar />\r\n\t\t\t{player.in_battle ? (\r\n\t\t\t\t<Pvp />\r\n\t\t\t) : (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Character player={player} />\r\n\t\t\t\t\t<Map />\r\n\t\t\t\t\t<Fights />\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t)}\r\n\t\t\t<Chat />\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default GamePage;\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport { Router, Route, Redirect } from 'react-router-dom';\r\n\r\nimport history from './history';\r\nimport { AuthContext } from './context/AuthContext';\r\nimport { PlayerContext } from './context/PlayerContext';\r\nimport { checkAuth } from './actions/AuthActions';\r\nimport { getPlayerInfo } from './actions/PlayerActions';\r\n//import NavBar from './components/layouts/NavBar';\r\nimport './App.css';\r\n\r\nimport LoginPage from './pages/LoginPage';\r\nimport RegisterPage from './pages/RegisterPage';\r\nimport GamePage from './pages/GamePage';\r\n\r\nconst App = () => {\r\n\tconst [auth, setAuth] = useState({ isAuth: false });\r\n\tconst [player, setPlayer] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAuth({ isAuth: checkAuth() });\r\n\t\tif (checkAuth()) {\r\n\t\t\tgetPlayerInfo()\r\n\t\t\t\t.then(res => setPlayer(res))\r\n\t\t\t\t.catch(err => console.log(err));\r\n\t\t}\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<Router history={history}>\r\n\t\t\t<AuthContext.Provider value={{ auth, setAuth }}>\r\n\t\t\t\t<PlayerContext.Provider value={{ player, setPlayer }}>\r\n\t\t\t\t\t{/* <NavBar /> */}\r\n\t\t\t\t\t<Route exact path=\"/\" component={LoginPage} />\r\n\t\t\t\t\t<Route path=\"/register\" component={RegisterPage} />\r\n\t\t\t\t\t<PrivateRoute path=\"/game\" component={GamePage} />\r\n\t\t\t\t</PlayerContext.Provider>\r\n\t\t\t</AuthContext.Provider>\r\n\t\t</Router>\r\n\t);\r\n};\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n\tconst { auth } = useContext(AuthContext);\r\n\tconst isAuth = auth.isAuth;\r\n\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\trender={props =>\r\n\t\t\t\tisAuth ? (\r\n\t\t\t\t\t<Component {...props} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Redirect to={{ pathname: '/', state: { from: props.location } }} />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === 'localhost' ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === '[::1]' ||\r\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(\r\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n\t\t)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\r\n\t\t\t\t\t\t\t'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then(registration => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === 'installed') {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\r\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tconsole.error('Error during service worker registration:', error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl)\r\n\t\t.then(response => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\tif (\r\n\t\t\t\tresponse.status === 404 ||\r\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\r\n\t\t\t) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\r\n\t\t\t\t'No internet connection found. App is running in offline mode.'\r\n\t\t\t);\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\tregistration.unregister();\r\n\t\t});\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}